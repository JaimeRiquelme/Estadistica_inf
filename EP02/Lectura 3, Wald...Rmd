---
title: "Lectura 3, metodo wald"
author: "Jaime Riquelme"
date: "2024-11-09"
output: html_document
---

# Pruebas de inferencia con proporciones muestrales

## Método de Wald

El metodo de wald permite contruir intervalos de confianza y contrastar hipotesis bajo supuesto de normalidad para una proporcion.

Ejemplo: 

Aquiles baeza desea conocer que proporcion de las ejecuones de un algoritmo de ordenamiento para instancias con 100000 elementos tardan menos de 25 segundos, para ellos registro tiempos de ejecucion de 150 instancias generadas aleatoriamente. encontrando que 64% de ellas fueron resueltas en un tiempo menor a 25 segundos.

Datos del problema

```{r}
n <- 150
p <- 0.64
alpha <- 0.05
```

Para responder podemos calcular el intervalo de confianza para la verdadera proporcion a partir de esta muestra, si es que se cumplen las condiciones para que la distribucion de p sea cercana a la normal.

**Condiciones**

1.- Las observaciones de la muestra son independientes.
2.- Se cumple la condicion de exito-fracaso, que establece que se espera observar al menos 10 observaciones correspondientes a exito y al menos 20 correspondientes a fracaso, matematicamente, np > = 10 y n(1-p) > = 10.

Dado la informacion anterior, podemos confirmar que se cumplen ambas condiciones, por lo que podemos proceder a calcular el intervalo de confianza.

**Calculo del intervalo de confianza**
```{r}
error_est <- sqrt((p*(1-p))/n)
Z_critico <- qnorm(alpha/2, lower.tail = FALSE)

inferior <- p - Z_critico*error_est
superior <- p + Z_critico*error_est

print("Intervalo de confianza")
print(c(inferior,superior))


```
Este intervalo de confianza significa que tenemos 95% de confianza que la proporcion de instancias del problema que el algoritmo ordena en menor de 25 segundos se encuentra entre 56.31% y 71.69%.

Por otro lado, si queremos una prueba de hipotesis para una proporcion, podemos calcular el valor de p mediante la funcion pnorm.

Como baeza le asegura al jefe que mas del 70% se ejecutan en menor de 25 segundos, podemos plantear la hipotesis nula y alternativa de la siguiente forma:

**Hipótesis**

H0: La cantidad de instancias que se ejecutan en menos de 25 segundos es igual al 70%. (p = 0.70)
Ha: La cantidad de instancias que se ejecutan en menos de 25 segundos es mayor al 70%. (p > 0.70)


**Calculo del p-valor**
```{r}
#Pruena de Hipótesis

valor_nulo5 <- 0.7

error_est_hip <- sqrt((valor_nulo5*(1-valor_nulo5))/n)
Z_est <- (p - valor_nulo5)/error_est_hip

p <- pnorm(Z_est, lower.tail = FALSE)

print("P-valor")
print(p)
```
Como el valor obtenido de p, es mayor al nivel de significancia, no tenemos evidencia suficiente para rechazar la hipotesis nula, por lo que no podemos asegurar que mas del 70% de las instancias se ejecutan en menos de 25 segundos.
